<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Пиксельная смена изображений</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #fff;
            overflow: hidden;
        }
        
        .image-container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        
        .image-slide {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: contain;
            opacity: 0;
            transition: none;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        .image-slide.active {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="image-container">
        <img src="images/2/2_static_image.png" alt="Статичное изображение" class="image-slide active" id="image0">
        <img src="images/2/2_left_1.png" alt="Левое изображение 1" class="image-slide" id="image1">
        <img src="images/2/2_left_2.png" alt="Левое изображение 2" class="image-slide" id="image2">
        <img src="images/2/2_left_3.png" alt="Левое изображение 3" class="image-slide" id="image3">
    </div>

    <script>
        const images = [
            'images/2/2_static_image.png',
            'images/2/2_left_1.png', 
            'images/2/2_left_2.png',
            'images/2/2_left_3.png'
        ];
        
        let currentImageIndex = 0;
        const displayDuration = 300; // 300мс
        let isPlaying = false;
        let intervalId = null;
        let playCount = 0;
        
        function showImage(index) {
            // Скрыть все изображения
            document.querySelectorAll('.image-slide').forEach(img => {
                img.classList.remove('active');
            });
            
            // Показать текущее изображение
            const currentImg = document.getElementById(`image${index}`);
            currentImg.classList.add('active');
            
            currentImageIndex = index;
        }
        
        function nextImage() {
            currentImageIndex = (currentImageIndex + 1) % images.length;
            showImage(currentImageIndex);
            
            // Если прошли полный цикл (4 картинки), останавливаем
            if (currentImageIndex === 0) {
                playCount++;
                if (playCount >= 1) {
                    stopSlideshow();
                    playCount = 0;
                }
            }
        }
        
        function startSlideshow() {
            if (!isPlaying) {
                isPlaying = true;
                playCount = 0;
                currentImageIndex = 0; // Начинаем с первой картинки
                showImage(currentImageIndex);
                intervalId = setInterval(nextImage, displayDuration);
            }
        }
        
        function stopSlideshow() {
            if (isPlaying) {
                isPlaying = false;
                if (intervalId) {
                    clearInterval(intervalId);
                    intervalId = null;
                }
            }
        }
        
        // Обработчик нажатий по экрану
        document.addEventListener('touchstart', function(e) {
            e.preventDefault();
            if (!isPlaying) {
                startSlideshow();
            }
        });
        
        // Обработчик кликов мышью (для тестирования на компьютере)
        document.addEventListener('click', function(e) {
            e.preventDefault();
            if (!isPlaying) {
                startSlideshow();
            }
        });
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            showImage(0);
        });
    </script>
</body>
</html>
